var EventEmitter = require('events').EventEmitter;

function Monster(life){
	this.life= life || 15;
}

//type event emitter
Monster.prototype = Object.create(EventEmitter.prototype);
// become a monster again
Monster.prototype.constructor = Monster;

Monster.prototype.setLife = function(life){
	this.life = life;
	return this;
};

Monster.prototype.getLife = function(){
	return this.life;
};

Monster.prototype.hit = function(nb){
	this.life-= nb;
	if (this.life<=0) {
		//objet anonymes dans emit
		this.emit('dead', {lastHit:nb, life:this.life, message: 'Monde de merde'});
	}else{
		this.emit('continue', {lastHit:nb, life:this.life, message: 'mÃªme pas mal'});
	}
};

module.exports=Monster;