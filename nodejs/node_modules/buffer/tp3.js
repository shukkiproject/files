//1
// var fs = require('fs');

// file='./' + process.argv[2];
// var text = fs.readFileSync(file, 'utf8');

// console.log(text.split('\n').length);



//2
// var fs = require('fs');

// fs.readFile('./' + process.argv[2], function(err, data){
// 	console.log('async data : ' + data.toString().split('\n').length);
// });

//3
// var fs = require('fs');
// var path= require('path');

// fs.readdir(process.argv[2], function(err, files){
// 	var ext='.'+process.argv[3];
// 	files.forEach(function(file){
// 		if (path.extname(file)===ext){
// 			console.log(path.basename(file));
// 		}
		
// 	});
// });

// //4
// var fs = require('fs');
// // var date = require('date');
// var debut= new Date();
// var debutP=debut.toLocaleString() + ": app started. \n";

// fs.appendFile('./app.log',debutP, function(err, data){
	
// 		var fin= new Date();
// 		var sec=fin - debut;
// 		var finP= fin.toLocaleString()+ ": app stopped after " + sec/1000 + " seconds. \n";
// 		fs.appendFile('./app.log',finP);
// });

//5
var fs = require('fs');
var path= require('path');
var dir=process.argv[2] || './';
var nb=process.argv[3];
var count=0;



function tree(dir, space, nb){

	var files=fs.readdirSync(dir);

		files.forEach(function(file){
			console.log(space+'|_'+file);

			if (fs.statSync(dir+file).isDirectory()) {
				
				//rappel de la function
				if (nb>count) {
					
						tree(dir+file+'/', space+' ', count+1);

					}
					
				
			} 
			
		});

}

console.log(tree(dir, ' ', nb));

